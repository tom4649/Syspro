課題bcdeレポート
05221021　富張聡祥

課題B,C,D
標準入力からのコマンドをparserで受け取ったあと、job構造体に格納されたjobを実行する関数dojobとその中で再帰的に用いられる関数piperecを作成した。
関数jobは一連のjobそれぞれについて実行するプロセスの配列を実行する順番で作り、関数piperecを呼び出す関数である。
この際job構造体に格納されたinput,outputの条件によってリダイレクション、追記出力リダイレクトに対応した。
関数piperecは番号iによって配列中のプロセスを指定し、自分より先に実行すべきプロセスを子プロセスで再帰的に実行し、同時に親プロセスで指定されたプロセスを実行する関数である。
これによって複数のパイプの組み合わせに対応でき、同時に複数のプロセスを動かすことによってパイプのバッファが一杯になってしまう場合にも対応した。
さらにプログラムを実行する際execveではなくexecvpを用いることで、環境変数PATHを受け取ることができた。
以上の実装でoptionalを含めた全ての要件を満たしたつもりである。

課題E
1byte単位での入力を実現する方法:
bashではカーソル移動やヒストリー検索機能、タブ補完など1byte単位の入力に対して入力された瞬間に処理が返される機能がある。
またbashではヒストリ機能がカーネルには実装されていないが、行編集はカーネル内で行われ改行が入力されるまでバッファリングされるようになっている。
そのため上記機能の実現には改行の入力まで1byteの入力ごとにバッファリングの機能の有効、無効化を制御する必要がある。
Linuxのioctlというデバイス制御のためのシステムコールがこのために用いられている。

上記機能のためにbashで用いられているライブラリ名:termios

参考
<https://linuxjm.osdn.jp/html/LDP_man-pages/man3/termios.3.html> termiosのmanページ。bashについて言及があった。
<https://tyfkda.github.io/blog/2019/07/24/history-in-shell.html> bashでのヒストリー検索機能について解説されている